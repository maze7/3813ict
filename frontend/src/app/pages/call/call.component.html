<div class="container mx-auto p-4">
  <div class="grid gap-4" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
    <!-- User videos -->
    @for (peer of Object.values(peers); track peer.id) {
      <div class="relative group">
        <video [srcObject]="peer.stream" autoplay [muted]="peer.muted" class="w-full rounded-md"></video>
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-2">
          <p class="text-white text-lg font-bold">{{ peer.user.username }}</p>
        </div>
      </div>
    }
  </div>
  <!-- Video control bar at the bottom of the screen -->
  <div class="fixed bottom-0 left-0 right-0 p-4">
    <div class="flex justify-center space-x-4">
      <!-- Mic on/off button -->
      <button (click)="toggleMute()" class="btn btn-circle text-white">
        @if (muted) {
          <lucide-angular name="mic-off"></lucide-angular>
        }
        @else {
          <lucide-angular name="mic"></lucide-angular>
        }
      </button>

      <!-- Video on/off button -->
      <button (click)="toggleVideo()" class="btn btn-circle text-white">
        @if (cameraOff) {
          <lucide-angular name="camera-off"></lucide-angular>
        }
        @else {
          <lucide-angular name="camera"></lucide-angular>
        }
      </button>

      <!-- Leave call button -->
      <button (click)="leaveCall()" class="btn btn-circle text-red-500">
        <lucide-angular name="phone-off"></lucide-angular>
      </button>
    </div>
  </div>
</div>
